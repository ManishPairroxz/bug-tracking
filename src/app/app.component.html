<div>

  <!-- Table -->
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Assignee</th>
        <th scope="col">Bug status</th>
        <th scope="col">Priority</th>
      </tr>


    </thead>
    <tbody>

      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">+ Add</button>

      <!-- 1 row -->
      <ng-container *ngIf="result">
        <ng-container *ngFor="let item of result; let i = index;">

          <!-- Details -->
          <tr>
            <th scope="row">
              <ngx-edit-inline
              [value]="item.title.slice(0,50)"
              [type]="'text'"
              [saveOption]="'onedit'"
              [debounceTime]="500"
              [selectText]="true"
              (onValueChanged)="changedValue($event,item)"
              ></ngx-edit-inline>
            </th>
            <td>{{item.assignee}}</td>

            <!-- Status -->
            <td *ngIf="item.status == 'new'"><span
                [ngClass]="item.status == 'new' ? 'badge bg-secondary custom-badge' : ''">New</span></td>
            <td *ngIf="item.status == 'assinged'"><span
                [ngClass]="item.status == 'assinged' ? 'badge bg-primary custom-badge' : ''">Assigned</span></td>
            <td *ngIf="item.status == 'fixed'"><span
                [ngClass]="item.status == 'fixed' ? 'badge bg-warning text-dark custom-badge' : ''">Fixed</span></td>

            <td *ngIf="item.status == 'reopen'"><span
                [ngClass]="item.status == 'reopen' ? 'badge bg-danger custom-badge' : ''">Reopen</span></td>
            <td *ngIf="item.status == 'verified'">
              <span [ngClass]="item.status == 'verified' ? 'badge bg-dark custom-badge' : '' ">Verified</span>
            </td>
            <td *ngIf="item.status == 'closed'"><span
                [ngClass]="item.status == 'closed' ? 'badge bg-success  custom-badge' : ''">Closed</span></td>
            <!-- Status -->

            <!-- Priority -->
            <td *ngIf="item.priority == 'low'"><span
                [ngClass]="item.priority == 'low' ? 'badge bg-secondary custom-badge  w-100' : ''">Low</span></td>
            <td *ngIf="item.priority == 'medium'"><span
                [ngClass]="item.priority == 'medium' ? 'badge bg-primary  custom-badge  w-100' : ''">Medium</span></td>
            <td *ngIf="item.priority == 'high'"><span
                [ngClass]="item.priority == 'high' ? 'badge bg-danger custom-badge w-100' : ''">High</span></td>

            <td>
              <select (change)="updateStatus(item, $event)">
                <optgroup label="___Developer____">
                  <option value="" disabled selected>Please select one option</option>
                  <option value="assinged" [disabled]="item.assignee != 'developer' ">Assigned</option>
                  <option value="fixed" [disabled]="item.assignee != 'developer' ">Fixed</option>
                </optgroup>
                <optgroup label="____Tester_____">
                  <option [disabled]="item.assignee != 'tester' " value="reopen">Reopened</option>
                  <option [disabled]="item.assignee != 'tester' " value="verified">Verified</option>
                </optgroup>
                <optgroup label="___Client____">
                  <option value="" disabled selected>Please select an option.</option>
                  <option [disabled]="item.assignee != 'client' || this.item.status == 'closed'" value="closed">Closed
                  </option>
                  <option [disabled]="item.assignee != 'client' || this.item.status == 'closed'" value="reopen">Reopened
                  </option>
                </optgroup>
              </select>
            </td>

          </tr>
          <!-- Priority -->
        </ng-container>

      </ng-container>
      <!-- 1 row -->
    </tbody>
  </table>
  <!-- Table -->

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Add a bug</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form [formGroup]="addBugForm" id="exampleBugForm">
            <div class="mb-3">
              <label for="">Title</label>
              <input type="text" class="form-control" id="exampleInputTitle" aria-describedby="titleJelp"
                placeholder="Title" formControlName="title" />
                <!-- {{addBugForm?.controls['title']?.errors['required']}} -->
              <div class="error" *ngIf="addBugForm.controls['title'].touched && addBugForm.controls['title'].errors">
                <div *ngIf="addBugForm.controls['title'].errors['required']">
                  Title field is required.
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="">Assignee</label>
              <select id="assigneeSelect" class="form-select" aria-placeholder="Assignee" formControlName="assignee">
                <option value="developer" selected>Develoepr</option>
                <!-- <option value="tester">Tester</option>
                <option value="client">Client</option> -->
              </select>

              <div class="error"
                *ngIf="addBugForm.controls['assignee'].touched && addBugForm.controls['assignee'].errors">
                <div *ngIf="addBugForm.controls['assignee'].errors['required']">
                  Assignee field is required.
                </div>
              </div>

            </div>

            <div class="mb-3">
              <label for="">Priority</label>
              <select id="prioritySelect" class="form-select" aria-placeholder="Priority" formControlName="priority">
                <option value="high">High</option>
                <option value="medium">Medium</option>
                <option value="low">Low</option>
              </select>

              <div class="error"
                *ngIf="addBugForm.controls['priority'].touched && addBugForm.controls['priority'].errors">
                <div *ngIf="addBugForm.controls['priority'].errors['required']">
                  Priority field is required.
                </div>
              </div>

            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button [disabled]="!addBugForm.valid" type="button" class="btn btn-primary" (click)="onSubmit()">Save
            changes</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal -->

</div>